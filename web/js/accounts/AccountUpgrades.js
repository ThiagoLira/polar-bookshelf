"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Account_1 = require("./Account");
class AccountUpgrades {
    static upgradeRequired(plan, accountUsage) {
        const computeRequiredPlan = () => {
            const _350MB = 350000000;
            const _2GB = 2000000000;
            const _5GB = 5000000000;
            if (accountUsage.storageInBytes >= _350MB && accountUsage.storageInBytes < _2GB) {
                return 'bronze';
            }
            if (accountUsage.storageInBytes >= _2GB && accountUsage.storageInBytes < _5GB) {
                return 'silver';
            }
            if (accountUsage.storageInBytes >= _5GB) {
                return 'gold';
            }
            return 'free';
        };
        const requiredPlan = computeRequiredPlan();
        if (Account_1.AccountPlans.toInt(plan) < Account_1.AccountPlans.toInt(requiredPlan)) {
            return requiredPlan;
        }
        return undefined;
    }
}
exports.AccountUpgrades = AccountUpgrades;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNjb3VudFVwZ3JhZGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQWNjb3VudFVwZ3JhZGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsdUNBQW9EO0FBRXBELE1BQWEsZUFBZTtJQVNqQixNQUFNLENBQUMsZUFBZSxDQUFDLElBQWlCLEVBQUUsWUFBMEI7UUFLdkUsTUFBTSxtQkFBbUIsR0FBRyxHQUFHLEVBQUU7WUFFN0IsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDO1lBQ3pCLE1BQVEsSUFBSSxHQUFHLFVBQVUsQ0FBQztZQUMxQixNQUFRLElBQUksR0FBRyxVQUFVLENBQUM7WUFFMUIsSUFBSSxZQUFZLENBQUMsY0FBYyxJQUFJLE1BQU0sSUFBSSxZQUFZLENBQUMsY0FBYyxHQUFHLElBQUksRUFBRTtnQkFDN0UsT0FBTyxRQUFRLENBQUM7YUFDbkI7WUFFRCxJQUFJLFlBQVksQ0FBQyxjQUFjLElBQUksSUFBSSxJQUFJLFlBQVksQ0FBQyxjQUFjLEdBQUcsSUFBSSxFQUFFO2dCQUMzRSxPQUFPLFFBQVEsQ0FBQzthQUNuQjtZQUVELElBQUksWUFBWSxDQUFDLGNBQWMsSUFBSSxJQUFJLEVBQUc7Z0JBQ3RDLE9BQU8sTUFBTSxDQUFDO2FBQ2pCO1lBRUQsT0FBTyxNQUFNLENBQUM7UUFFbEIsQ0FBQyxDQUFDO1FBRUYsTUFBTSxZQUFZLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztRQUUzQyxJQUFJLHNCQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLHNCQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQzdELE9BQU8sWUFBWSxDQUFDO1NBQ3ZCO1FBRUQsT0FBTyxTQUFTLENBQUM7SUFFckIsQ0FBQztDQUVKO0FBOUNELDBDQThDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSGFuZGxlcyBsaXN0ZW5pbmcgZm9yIGFjY291bnQgY2hhbmdlcyBmb3IgdGhlIHVzZXIgYW5kIHRlbGxpbmcgdGhlbVxuICogb2YgY2hhbmdlcyB0byB0aGVpciBwbGFuIG92ZXIgdGltZS5cbiAqL1xuaW1wb3J0IHtBY2NvdW50UGxhbiwgQWNjb3VudFBsYW5zfSBmcm9tIFwiLi9BY2NvdW50XCI7XG5cbmV4cG9ydCBjbGFzcyBBY2NvdW50VXBncmFkZXMge1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGb3JjZSB0aGUgdXNlciB0byB1cGdyYWRlIHRvIGEgcGxhbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwbGFuIGN1cnJlbnQgdXNlciBwbGFuLlxuICAgICAqIEBwYXJhbSBhY2NvdW50VXNhZ2UgVGhlIGRhdGEgYWJvdXQgdGhlIG1hY2hpbmUgdGhhdCB3ZSdyZSBuZWVkaW5nIHRvIHVwZ3JhZGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHVwZ3JhZGVSZXF1aXJlZChwbGFuOiBBY2NvdW50UGxhbiwgYWNjb3VudFVzYWdlOiBBY2NvdW50VXNhZ2UpOiBBY2NvdW50UGxhbiB8IHVuZGVmaW5lZCB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgcmVxdWlyZWQgcGxhbiBwZXIgdGhlIGFtb3VudCBvZiBkYXRhIGJlaW5nIHVzZWQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjb21wdXRlUmVxdWlyZWRQbGFuID0gKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBfMzUwTUIgPSAzNTAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCAgIF8yR0IgPSAyMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgICBfNUdCID0gNTAwMDAwMDAwMDtcblxuICAgICAgICAgICAgaWYgKGFjY291bnRVc2FnZS5zdG9yYWdlSW5CeXRlcyA+PSBfMzUwTUIgJiYgYWNjb3VudFVzYWdlLnN0b3JhZ2VJbkJ5dGVzIDwgXzJHQikge1xuICAgICAgICAgICAgICAgIHJldHVybiAnYnJvbnplJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFjY291bnRVc2FnZS5zdG9yYWdlSW5CeXRlcyA+PSBfMkdCICYmIGFjY291bnRVc2FnZS5zdG9yYWdlSW5CeXRlcyA8IF81R0IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NpbHZlcic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhY2NvdW50VXNhZ2Uuc3RvcmFnZUluQnl0ZXMgPj0gXzVHQiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2dvbGQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJ2ZyZWUnO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVxdWlyZWRQbGFuID0gY29tcHV0ZVJlcXVpcmVkUGxhbigpO1xuXG4gICAgICAgIGlmIChBY2NvdW50UGxhbnMudG9JbnQocGxhbikgPCBBY2NvdW50UGxhbnMudG9JbnQocmVxdWlyZWRQbGFuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVkUGxhbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY2NvdW50VXNhZ2Uge1xuICAgIHJlYWRvbmx5IHN0b3JhZ2VJbkJ5dGVzOiBudW1iZXI7XG59XG4iXX0=