"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const JQuery_1 = __importDefault(require("../../../../ui/JQuery"));
require("bootstrap");
require("summernote/dist/summernote-bs4");
const react_1 = __importStar(require("react"));
const react_dom_1 = __importDefault(require("react-dom"));
const randomUid = () => Math.floor(Math.random() * 100000);
class ReactSummernote4 extends react_1.Component {
    constructor(props) {
        super(props);
        if (this.props.options.id) {
            this.uid = this.props.options.id;
        }
        else {
            this.uid = `react-summernote-${randomUid()}`;
        }
        this.editor = {};
        this.noteEditable = null;
        this.notePlaceholder = null;
        this.onInit = this.onInit.bind(this);
        this.onImageUpload = this.onImageUpload.bind(this);
        this.focus = this.focus.bind(this);
        this.isEmpty = this.isEmpty.bind(this);
        this.reset = this.reset.bind(this);
        this.replace = this.replace.bind(this);
        this.disable = this.disable.bind(this);
        this.enable = this.enable.bind(this);
        this.toggleState = this.toggleState.bind(this);
        this.insertImage = this.insertImage.bind(this);
        this.insertNode = this.insertNode.bind(this);
        this.insertText = this.insertText.bind(this);
        if (this.props.onRichTextMutator) {
            this.props.onRichTextMutator(this);
        }
    }
    componentDidMount() {
        const options = this.props.options || {};
        const codeview = this.props.codeview;
        options.callbacks = this.callbacks;
        const domNode = react_dom_1.default.findDOMNode(this);
        this.editor = JQuery_1.default(domNode).find(`#${this.uid}`);
        this.editor.summernote(options);
        if (codeview) {
            this.editor.summernote('codeview.activate');
        }
        if (options.airMode) {
            domNode.parentElement.addEventListener('click', () => {
                this.editor.summernote('focus');
            });
        }
        if (this.props.autofocus) {
            this.editor.summernote('focus');
        }
    }
    componentWillReceiveProps(nextProps) {
        const { props } = this;
        const codeview = nextProps.codeview;
        const codeviewCommand = codeview ? 'codeview.activate' : 'codeview.deactivate';
        if (typeof nextProps.value === 'string') {
            this.replace(nextProps.value);
        }
        if (typeof nextProps.disabled === 'boolean' && props.disabled !== nextProps.disabled) {
            this.toggleState(nextProps.disabled);
        }
        if (codeview !== props.codeview) {
            this.editor.summernote(codeviewCommand);
        }
        if (this.props.autofocus) {
            this.editor.summernote('focus');
        }
    }
    shouldComponentUpdate() {
        return false;
    }
    componentWillUnmount() {
        if (this.editor.summernote) {
            this.editor.summernote('destroy');
        }
    }
    onInit() {
        const { disabled, onInit } = this.props;
        const $container = this.editor.parent();
        this.noteEditable = $container.find('.note-editable');
        this.notePlaceholder = $container.find('.note-placeholder');
        if (typeof disabled === 'boolean') {
            this.toggleState(disabled);
        }
        if (typeof onInit === 'function') {
            onInit({
                summernote: this.editor.summernote.bind(this.editor),
                focus: this.focus,
                isEmpty: this.isEmpty,
                reset: this.reset,
                replace: this.replace,
                disable: this.disable,
                enable: this.enable,
                insertImage: this.insertImage,
                insertNode: this.insertNode,
                insertText: this.insertText
            });
        }
    }
    onImageUpload(images) {
        const { onImageUpload } = this.props;
        if (typeof onImageUpload === 'function') {
            onImageUpload(images, this.insertImage);
        }
    }
    focus() {
        this.editor.summernote('focus');
    }
    isEmpty() {
        return this.editor.summernote('isEmpty');
    }
    reset() {
        this.editor.summernote('reset');
    }
    replace(content) {
        const { noteEditable, notePlaceholder } = this;
        const prevContent = noteEditable.html();
        const contentLength = content.length;
        if (prevContent !== content) {
            if (this.isEmpty() && contentLength > 0) {
                notePlaceholder.hide();
            }
            else if (contentLength === 0) {
                notePlaceholder.show();
            }
            noteEditable.html(content);
        }
    }
    currentValue() {
        return this.noteEditable.html();
    }
    createRange() {
        return this.editor.summernote('createRange');
    }
    disable() {
        this.editor.summernote('disable');
    }
    enable() {
        this.editor.summernote('enable');
    }
    toggleState(disabled) {
        if (disabled) {
            this.disable();
        }
        else {
            this.enable();
        }
    }
    insertImage(url, filenameOrCallback) {
        this.editor.summernote('insertImage', url, filenameOrCallback);
    }
    insertNode(node) {
        this.editor.summernote('insertNode', node);
    }
    insertText(text) {
        this.editor.summernote('insertText', text);
    }
    get callbacks() {
        const props = this.props;
        return {
            onInit: this.onInit,
            onEnter: props.onEnter,
            onFocus: props.onFocus,
            onBlur: props.onBlur,
            onKeyup: props.onKeyUp,
            onKeydown: props.onKeyDown,
            onPaste: props.onPaste,
            onChange: props.onChange,
            onImageUpload: this.onImageUpload
        };
    }
    render() {
        const { value, defaultValue, className } = this.props;
        const html = value || defaultValue || "";
        return (react_1.default.createElement("div", { className: className },
            react_1.default.createElement("div", { id: this.uid, dangerouslySetInnerHTML: { __html: html } })));
    }
}
exports.ReactSummernote4 = ReactSummernote4;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhY3RTdW1tZXJub3RlNC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlJlYWN0U3VtbWVybm90ZTQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUVBLG1FQUFzQztBQUN0QyxxQkFBbUI7QUFDbkIsMENBQXdDO0FBRXhDLCtDQUF1QztBQUN2QywwREFBaUM7QUFHakMsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUM7QUFLM0QsTUFBYSxnQkFBaUIsU0FBUSxpQkFBc0I7SUE2QnhELFlBQVksS0FBVTtRQUNsQixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFYixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRTtZQUN2QixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUNwQzthQUFNO1lBQ0gsSUFBSSxDQUFDLEdBQUcsR0FBRyxvQkFBb0IsU0FBUyxFQUFFLEVBQUUsQ0FBQztTQUNoRDtRQUVELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBRTVCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFB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WUFBWSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBRXpCLE9BQU87WUFDSCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07WUFDbkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztZQUN0QixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU07WUFDcEIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUztZQUMxQixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87WUFDdEIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtTQUNwQyxDQUFDO0lBQ04sQ0FBQztJQUVNLE1BQU07UUFDVCxNQUFNLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3RELE1BQU0sSUFBSSxHQUFHLEtBQUssSUFBSSxZQUFZLElBQUksRUFBRSxDQUFDO1FBRXpDLE9BQU8sQ0FDSCx1Q0FBSyxTQUFTLEVBQUUsU0FBUztZQUNyQix1Q0FBSyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBSSxDQUM5RCxDQUNULENBQUM7SUFDTixDQUFDO0NBRUo7QUFuUUQsNENBbVFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsICQgKi9cblxuaW1wb3J0ICQgZnJvbSAnLi4vLi4vLi4vLi4vdWkvSlF1ZXJ5JztcbmltcG9ydCAnYm9vdHN0cmFwJztcbmltcG9ydCAnc3VtbWVybm90ZS9kaXN0L3N1bW1lcm5vdGUtYnM0JztcblxuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7SFRNTFN0cmluZywgUmljaFRleHRNdXRhdG9yfSBmcm9tICcuL1JpY2hUZXh0TXV0YXRvcic7XG5cbmNvbnN0IHJhbmRvbVVpZCA9ICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCk7XG5cbi8qKlxuICogUmVhY3QgU3VtbWVybm90ZSBmb3IgVHdpdHRlciBCb290c3RyYXAgdjRcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWN0U3VtbWVybm90ZTQgZXh0ZW5kcyBDb21wb25lbnQ8SVByb3BzLCBhbnk+IGltcGxlbWVudHMgUmljaFRleHRNdXRhdG9yIHtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgdWlkOiBzdHJpbmc7XG5cbiAgICBwcml2YXRlIGVkaXRvcjogYW55O1xuXG4gICAgcHJpdmF0ZSBub3RlRWRpdGFibGU6IGFueTtcblxuICAgIHByaXZhdGUgbm90ZVBsYWNlaG9sZGVyOiBhbnk7XG5cbiAgICAvLyBSZWFjdFN1bW1lcm5vdGUucHJvcFR5cGVzID0ge1xuICAgIC8vICAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvLyAgICAgZGVmYXVsdFZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIC8vICAgICBjb2RldmlldzogUHJvcFR5cGVzLmJvb2wsXG4gICAgLy8gICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvLyAgICAgb3B0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAvLyAgICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLy8gICAgIG9uSW5pdDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vICAgICBvbkZvY3VzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25LZXlVcDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uS2V5RG93bjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uUGFzdGU6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vICAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uSW1hZ2VVcGxvYWQ6IFByb3BUeXBlcy5mdW5jXG4gICAgLy8gfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMuaWQpIHtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdGhpcy5wcm9wcy5vcHRpb25zLmlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51aWQgPSBgcmVhY3Qtc3VtbWVybm90ZS0ke3JhbmRvbVVpZCgpfWA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVkaXRvciA9IHt9O1xuICAgICAgICB0aGlzLm5vdGVFZGl0YWJsZSA9IG51bGw7XG4gICAgICAgIHRoaXMubm90ZVBsYWNlaG9sZGVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uSW5pdCA9IHRoaXMub25Jbml0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25JbWFnZVVwbG9hZCA9IHRoaXMub25JbWFnZVVwbG9hZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmZvY3VzID0gdGhpcy5mb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzRW1wdHkgPSB0aGlzLmlzRW1wdHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXNldCA9IHRoaXMucmVzZXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXBsYWNlID0gdGhpcy5yZXBsYWNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZSA9IHRoaXMuZGlzYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmVuYWJsZSA9IHRoaXMuZW5hYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaW5zZXJ0SW1hZ2UgPSB0aGlzLmluc2VydEltYWdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaW5zZXJ0Tm9kZSA9IHRoaXMuaW5zZXJ0Tm9kZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmluc2VydFRleHQgPSB0aGlzLmluc2VydFRleHQuYmluZCh0aGlzKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblJpY2hUZXh0TXV0YXRvcikge1xuICAgICAgICAgICAgLy8gZ2l2ZSB0aGUgY2FsbGVyIGFjY2VzcyB0byBzdW1tZXJub3RlIHRvIHBlcmZvcm0gaXRzIG93blxuICAgICAgICAgICAgLy8gbXV0YXRpb24gd2hlbiBuZWNlc3NhcnkuXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUmljaFRleHRNdXRhdG9yKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMucHJvcHMub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgY29uc3QgY29kZXZpZXcgPSB0aGlzLnByb3BzLmNvZGV2aWV3O1xuICAgICAgICAvLyBjb25zdCBjb2Rldmlld0NvbW1hbmQgPSBjb2RldmlldyA/ICdjb2Rldmlldy5hY3RpdmF0ZScgOiAnY29kZXZpZXcuZGVhY3RpdmF0ZSc7XG4gICAgICAgIG9wdGlvbnMuY2FsbGJhY2tzID0gdGhpcy5jYWxsYmFja3M7XG5cbiAgICAgICAgY29uc3QgZG9tTm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuZWRpdG9yID0gJChkb21Ob2RlKS5maW5kKGAjJHt0aGlzLnVpZH1gKTtcblxuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKG9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChjb2Rldmlldykge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnY29kZXZpZXcuYWN0aXZhdGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmFpck1vZGUpIHtcblxuICAgICAgICAgICAgZG9tTm9kZS5wYXJlbnRFbGVtZW50IS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdmb2N1cycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9mb2N1cykge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnZm9jdXMnKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBhbnkpIHtcblxuICAgICAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IGNvZGV2aWV3ID0gbmV4dFByb3BzLmNvZGV2aWV3O1xuICAgICAgICBjb25zdCBjb2Rldmlld0NvbW1hbmQgPSBjb2RldmlldyA/ICdjb2Rldmlldy5hY3RpdmF0ZScgOiAnY29kZXZpZXcuZGVhY3RpdmF0ZSc7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0UHJvcHMudmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2UobmV4dFByb3BzLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dFByb3BzLmRpc2FibGVkID09PSAnYm9vbGVhbicgJiYgcHJvcHMuZGlzYWJsZWQgIT09IG5leHRQcm9wcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShuZXh0UHJvcHMuZGlzYWJsZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvZGV2aWV3ICE9PSBwcm9wcy5jb2Rldmlldykge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZShjb2Rldmlld0NvbW1hbmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYXV0b2ZvY3VzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdmb2N1cycpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBpZiAodGhpcy5lZGl0b3Iuc3VtbWVybm90ZSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnZGVzdHJveScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uSW5pdCgpIHtcblxuICAgICAgICBjb25zdCB7IGRpc2FibGVkLCBvbkluaXQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgY29uc3QgJGNvbnRhaW5lciA9IHRoaXMuZWRpdG9yLnBhcmVudCgpO1xuXG4gICAgICAgIHRoaXMubm90ZUVkaXRhYmxlID0gJGNvbnRhaW5lci5maW5kKCcubm90ZS1lZGl0YWJsZScpO1xuICAgICAgICB0aGlzLm5vdGVQbGFjZWhvbGRlciA9ICRjb250YWluZXIuZmluZCgnLm5vdGUtcGxhY2Vob2xkZXInKTtcblxuICAgICAgICBpZiAodHlwZW9mIGRpc2FibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoZGlzYWJsZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvbkluaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uSW5pdCh7XG4gICAgICAgICAgICAgICAgc3VtbWVybm90ZTogdGhpcy5lZGl0b3Iuc3VtbWVybm90ZS5iaW5kKHRoaXMuZWRpdG9yKSxcbiAgICAgICAgICAgICAgICBmb2N1czogdGhpcy5mb2N1cyxcbiAgICAgICAgICAgICAgICBpc0VtcHR5OiB0aGlzLmlzRW1wdHksXG4gICAgICAgICAgICAgICAgcmVzZXQ6IHRoaXMucmVzZXQsXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdGhpcy5yZXBsYWNlLFxuICAgICAgICAgICAgICAgIGRpc2FibGU6IHRoaXMuZGlzYWJsZSxcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRoaXMuZW5hYmxlLFxuICAgICAgICAgICAgICAgIGluc2VydEltYWdlOiB0aGlzLmluc2VydEltYWdlLFxuICAgICAgICAgICAgICAgIGluc2VydE5vZGU6IHRoaXMuaW5zZXJ0Tm9kZSxcbiAgICAgICAgICAgICAgICBpbnNlcnRUZXh0OiB0aGlzLmluc2VydFRleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uSW1hZ2VVcGxvYWQoaW1hZ2VzOiBhbnkpIHtcblxuICAgICAgICBjb25zdCB7IG9uSW1hZ2VVcGxvYWQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvbkltYWdlVXBsb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkltYWdlVXBsb2FkKGltYWdlcywgdGhpcy5pbnNlcnRJbWFnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2ZvY3VzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdpc0VtcHR5Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdyZXNldCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXBsYWNlKGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCB7IG5vdGVFZGl0YWJsZSwgbm90ZVBsYWNlaG9sZGVyIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBwcmV2Q29udGVudCA9IG5vdGVFZGl0YWJsZS5odG1sKCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSBjb250ZW50Lmxlbmd0aDtcblxuICAgICAgICBpZiAocHJldkNvbnRlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkoKSAmJiBjb250ZW50TGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5vdGVQbGFjZWhvbGRlci5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnRMZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBub3RlUGxhY2Vob2xkZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub3RlRWRpdGFibGUuaHRtbChjb250ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjdXJyZW50VmFsdWUoKTogSFRNTFN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGVFZGl0YWJsZS5odG1sKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVJhbmdlKCk6IFJhbmdlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2NyZWF0ZVJhbmdlJyk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnZGlzYWJsZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBlbmFibGUoKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2VuYWJsZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b2dnbGVTdGF0ZShkaXNhYmxlZDogYm9vbGVhbikge1xuICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbnNlcnRJbWFnZSh1cmw6IGFueSwgZmlsZW5hbWVPckNhbGxiYWNrOiBhbnkpIHtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnaW5zZXJ0SW1hZ2UnLCB1cmwsIGZpbGVuYW1lT3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHVibGljIGluc2VydE5vZGUobm9kZTogTm9kZSkge1xuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdpbnNlcnROb2RlJywgbm9kZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGluc2VydFRleHQodGV4dDogTm9kZSkge1xuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdpbnNlcnRUZXh0JywgdGV4dCk7XG4gICAgfVxuXG4gICAgZ2V0IGNhbGxiYWNrcygpIHtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvbkluaXQ6IHRoaXMub25Jbml0LFxuICAgICAgICAgICAgb25FbnRlcjogcHJvcHMub25FbnRlcixcbiAgICAgICAgICAgIG9uRm9jdXM6IHByb3BzLm9uRm9jdXMsXG4gICAgICAgICAgICBvbkJsdXI6IHByb3BzLm9uQmx1cixcbiAgICAgICAgICAgIG9uS2V5dXA6IHByb3BzLm9uS2V5VXAsXG4gICAgICAgICAgICBvbktleWRvd246IHByb3BzLm9uS2V5RG93bixcbiAgICAgICAgICAgIG9uUGFzdGU6IHByb3BzLm9uUGFzdGUsXG4gICAgICAgICAgICBvbkNoYW5nZTogcHJvcHMub25DaGFuZ2UsXG4gICAgICAgICAgICBvbkltYWdlVXBsb2FkOiB0aGlzLm9uSW1hZ2VVcGxvYWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkZWZhdWx0VmFsdWUsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgaHRtbCA9IHZhbHVlIHx8IGRlZmF1bHRWYWx1ZSB8fCBcIlwiO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXt0aGlzLnVpZH0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBodG1sIH19IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbn1cblxuaW50ZXJmYWNlIElQcm9wcyB7XG5cbiAgICByZWFkb25seSBvcHRpb25zOiBhbnk7XG4gICAgcmVhZG9ubHkgdmFsdWU/OiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlPzogc3RyaW5nO1xuICAgIHJlYWRvbmx5IGNsYXNzTmFtZT86IHN0cmluZztcblxuICAgIHJlYWRvbmx5IGRpc2FibGVkPzogYm9vbGVhbjtcbiAgICByZWFkb25seSBhdXRvZm9jdXM/OiBib29sZWFuO1xuXG4gICAgcmVhZG9ubHkgY29kZXZpZXc/OiBhbnk7XG5cbiAgICByZWFkb25seSBvbkVudGVyPzogYW55O1xuICAgIHJlYWRvbmx5IG9uRm9jdXM/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25CbHVyPzogYW55O1xuICAgIHJlYWRvbmx5IG9uS2V5VXA/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25LZXlEb3duPzogYW55O1xuICAgIHJlYWRvbmx5IG9uUGFzdGU/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25DaGFuZ2U/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25Jbml0PzogYW55O1xuICAgIHJlYWRvbmx5IG9uSW1hZ2VVcGxvYWQ/OiBhbnk7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgb24gdGhlIGNvbnN0cnVjdG9yIHNvIHRoYXQgY2FsbGVycyBjYW4gYnVpbGQgdGhlaXIgb3duIGJ1dHRvbnNcbiAgICAgKiBhbmQgZnVjbnRpb25hbGl0eSBvbiB0aGUgdW5kZXJseWluZyB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICByZWFkb25seSBvblJpY2hUZXh0TXV0YXRvcj86IChtdXRhdG9yOiBSaWNoVGV4dE11dGF0b3IpID0+IHZvaWQ7XG5cbn1cblxuXG5cbiJdfQ==