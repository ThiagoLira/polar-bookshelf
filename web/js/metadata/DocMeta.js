"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const DocInfo_1 = require("./DocInfo");
const SerializedObject_1 = require("./SerializedObject");
const Preconditions_1 = require("polar-shared/src/Preconditions");
const AnnotationInfos_1 = require("./AnnotationInfos");
class DocMeta extends SerializedObject_1.SerializedObject {
    constructor(docInfo, pageMetas) {
        super();
        this.annotationInfo = AnnotationInfos_1.AnnotationInfos.create();
        this.version = 2;
        this.attachments = {};
        this.docInfo = docInfo;
        this.pageMetas = pageMetas;
    }
    getPageMeta(num) {
        num = Preconditions_1.Preconditions.assertPresent(num, "num");
        const pageMeta = this.pageMetas[num];
        if (!pageMeta) {
            throw new Error("No pageMeta for page: " + num);
        }
        return pageMeta;
    }
    validate() {
        Preconditions_1.Preconditions.assertInstanceOf(this.docInfo, DocInfo_1.DocInfo, "docInfo");
        Preconditions_1.Preconditions.assertPresent(this.pageMetas, "pageMetas");
        Preconditions_1.Preconditions.assertNumber(this.version, "version");
    }
}
exports.DocMeta = DocMeta;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jTWV0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkRvY01ldGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBa0M7QUFDbEMseURBQW9EO0FBQ3BELGtFQUE2RDtBQUM3RCx1REFBa0Q7QUFXbEQsTUFBYSxPQUFRLFNBQVEsbUNBQWdCO0lBdUJ6QyxZQUFZLE9BQWlCLEVBQUUsU0FBb0M7UUFDL0QsS0FBSyxFQUFFLENBQUM7UUFwQkwsbUJBQWMsR0FBRyxpQ0FBZSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzFDLFlBQU8sR0FBRyxDQUFDLENBQUM7UUFFWixnQkFBVyxHQUErQixFQUFFLENBQUM7UUFrQmhELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQy9CLENBQUM7SUFFTSxXQUFXLENBQUMsR0FBVztRQUUxQixHQUFHLEdBQUcsNkJBQWEsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTlDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFckMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNYLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLEdBQUcsR0FBRyxDQUFDLENBQUM7U0FDbkQ7UUFFRCxPQUFPLFFBQVEsQ0FBQztJQUVwQixDQUFDO0lBRU0sUUFBUTtRQUNYLDZCQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxpQkFBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ2pFLDZCQUFhLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDekQsNkJBQWEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN4RCxDQUFDO0NBRUo7QUFqREQsMEJBaURDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEb2NJbmZvfSBmcm9tICcuL0RvY0luZm8nO1xuaW1wb3J0IHtTZXJpYWxpemVkT2JqZWN0fSBmcm9tICcuL1NlcmlhbGl6ZWRPYmplY3QnO1xuaW1wb3J0IHtQcmVjb25kaXRpb25zfSBmcm9tICdwb2xhci1zaGFyZWQvc3JjL1ByZWNvbmRpdGlvbnMnO1xuaW1wb3J0IHtBbm5vdGF0aW9uSW5mb3N9IGZyb20gJy4vQW5ub3RhdGlvbkluZm9zJztcbmltcG9ydCB7QXR0YWNobWVudH0gZnJvbSAnLi9BdHRhY2htZW50JztcbmltcG9ydCB7SVBhZ2VNZXRhfSBmcm9tIFwicG9sYXItc2hhcmVkL3NyYy9tZXRhZGF0YS9JUGFnZU1ldGFcIjtcbmltcG9ydCB7SURvY0luZm99IGZyb20gXCJwb2xhci1zaGFyZWQvc3JjL21ldGFkYXRhL0lEb2NJbmZvXCI7XG5pbXBvcnQge0lEb2NNZXRhfSBmcm9tIFwicG9sYXItc2hhcmVkL3NyYy9tZXRhZGF0YS9JRG9jTWV0YVwiO1xuXG5cbi8qKlxuICogUm9vdCBtZXRhZGF0YSBmb3IgYSBkb2N1bWVudCBpbmNsdWRpbmcgcGFnZSBtZXRhZGF0YSwgYW5kIG1ldGFkYXRhIGZvclxuICogdGhlIHNwZWNpZmljIGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgRG9jTWV0YSBleHRlbmRzIFNlcmlhbGl6ZWRPYmplY3QgaW1wbGVtZW50cyBJRG9jTWV0YSB7XG5cbiAgICBwdWJsaWMgZG9jSW5mbzogSURvY0luZm87XG4gICAgcHVibGljIHBhZ2VNZXRhczoge1tpZDogc3RyaW5nXTogSVBhZ2VNZXRhfTtcbiAgICBwdWJsaWMgYW5ub3RhdGlvbkluZm8gPSBBbm5vdGF0aW9uSW5mb3MuY3JlYXRlKCk7XG4gICAgcHVibGljIHZlcnNpb24gPSAyO1xuXG4gICAgcHVibGljIGF0dGFjaG1lbnRzOiB7W2lkOiBzdHJpbmddOiBBdHRhY2htZW50fSA9IHt9O1xuXG4gICAgLy8gY29uc3RydWN0b3IodGVtcGxhdGU/OiBJRG9jTWV0YSkge1xuICAgIC8vXG4gICAgLy8gICAgIHN1cGVyKHRlbXBsYXRlKTtcbiAgICAvL1xuICAgIC8vICAgICBpZih0ZW1wbGF0ZSkge1xuICAgIC8vICAgICAgICAgdGhpcy5kb2NJbmZvID0gUHJlY29uZGl0aW9ucy5hc3NlcnROb3ROdWxsKHRlbXBsYXRlLmRvY0luZm8sIFwiZG9jSW5mb1wiKTtcbiAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgIHRoaXMuZG9jSW5mbyA9IG51bGw7XG4gICAgLy8gICAgIH1cbiAgICAvL1xuICAgIC8vICAgICB0aGlzLmluaXQodGVtcGxhdGUpO1xuICAgIC8vXG4gICAgLy8gfVxuXG4gICAgY29uc3RydWN0b3IoZG9jSW5mbzogSURvY0luZm8sIHBhZ2VNZXRhczoge1tpZDogbnVtYmVyXTogSVBhZ2VNZXRhfSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmRvY0luZm8gPSBkb2NJbmZvO1xuICAgICAgICB0aGlzLnBhZ2VNZXRhcyA9IHBhZ2VNZXRhcztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UGFnZU1ldGEobnVtOiBudW1iZXIpIHtcblxuICAgICAgICBudW0gPSBQcmVjb25kaXRpb25zLmFzc2VydFByZXNlbnQobnVtLCBcIm51bVwiKTtcblxuICAgICAgICBjb25zdCBwYWdlTWV0YSA9IHRoaXMucGFnZU1ldGFzW251bV07XG5cbiAgICAgICAgaWYgKCFwYWdlTWV0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcGFnZU1ldGEgZm9yIHBhZ2U6IFwiICsgbnVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYWdlTWV0YTtcblxuICAgIH1cblxuICAgIHB1YmxpYyB2YWxpZGF0ZSgpIHtcbiAgICAgICAgUHJlY29uZGl0aW9ucy5hc3NlcnRJbnN0YW5jZU9mKHRoaXMuZG9jSW5mbywgRG9jSW5mbywgXCJkb2NJbmZvXCIpO1xuICAgICAgICBQcmVjb25kaXRpb25zLmFzc2VydFByZXNlbnQodGhpcy5wYWdlTWV0YXMsIFwicGFnZU1ldGFzXCIpO1xuICAgICAgICBQcmVjb25kaXRpb25zLmFzc2VydE51bWJlcih0aGlzLnZlcnNpb24sIFwidmVyc2lvblwiKTtcbiAgICB9XG5cbn1cblxuXG5cbiJdfQ==