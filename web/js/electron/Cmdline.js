"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("polar-shared/src/Preconditions");
const FilePaths_1 = require("polar-shared/src/util/FilePaths");
class Cmdline {
    static getDocArg(args) {
        return Cmdline.getArg(args, Cmdline.isDoc);
    }
    static getURLArg(args) {
        return Cmdline.getArg(args, Cmdline.isURL);
    }
    static getArg(args, filter) {
        Preconditions_1.Preconditions.assertNotNull(filter, "filter");
        if (!(args instanceof Array)) {
            throw new Error("Args not an array");
        }
        const arg = args.filter((arg) => arg != null && filter(arg))
            .reduce((accumulator, currentValue) => accumulator = currentValue != null ? currentValue : null, null);
        return arg;
    }
    static isDoc(arg) {
        return FilePaths_1.FilePaths.hasExtension(arg, "pdf") || FilePaths_1.FilePaths.hasExtension(arg, "chtml") || FilePaths_1.FilePaths.hasExtension(arg, "phz");
    }
    static isURL(arg) {
        return arg.startsWith("http:") || arg.startsWith("https:") || arg.startsWith("file:");
    }
}
exports.Cmdline = Cmdline;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ21kbGluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNtZGxpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrRUFBNkQ7QUFDN0QsK0RBQTBEO0FBRTFELE1BQWEsT0FBTztJQUVoQixNQUFNLENBQUMsU0FBUyxDQUFDLElBQWM7UUFDM0IsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBYztRQUMzQixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFjLEVBQUUsTUFBZ0M7UUFFMUQsNkJBQWEsQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBRTlDLElBQUksQ0FBRSxDQUFDLElBQUksWUFBWSxLQUFLLENBQUMsRUFBRTtZQUMzQixNQUFNLElBQUksS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7U0FDeEM7UUFFRCxNQUFNLEdBQUcsR0FDTCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMzQyxNQUFNLENBQUMsQ0FBQyxXQUEwQixFQUFFLFlBQVksRUFBRSxFQUFFLENBQUMsV0FBVyxHQUFHLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRTlILE9BQU8sR0FBRyxDQUFDO0lBRWYsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBVztRQUMzQixPQUFPLHFCQUFTLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxxQkFBUyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLElBQUkscUJBQVMsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzVILENBQUM7SUFFTSxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQVc7UUFDM0IsT0FBTyxHQUFHLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMxRixDQUFDO0NBRUo7QUFsQ0QsMEJBa0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtQcmVjb25kaXRpb25zfSBmcm9tICdwb2xhci1zaGFyZWQvc3JjL1ByZWNvbmRpdGlvbnMnO1xuaW1wb3J0IHtGaWxlUGF0aHN9IGZyb20gJ3BvbGFyLXNoYXJlZC9zcmMvdXRpbC9GaWxlUGF0aHMnO1xuXG5leHBvcnQgY2xhc3MgQ21kbGluZSB7XG5cbiAgICBzdGF0aWMgZ2V0RG9jQXJnKGFyZ3M6IHN0cmluZ1tdKSB7XG4gICAgICAgIHJldHVybiBDbWRsaW5lLmdldEFyZyhhcmdzLCBDbWRsaW5lLmlzRG9jKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0VVJMQXJnKGFyZ3M6IHN0cmluZ1tdKSB7XG4gICAgICAgIHJldHVybiBDbWRsaW5lLmdldEFyZyhhcmdzLCBDbWRsaW5lLmlzVVJMKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0QXJnKGFyZ3M6IHN0cmluZ1tdLCBmaWx0ZXI6IChhcmc6IHN0cmluZykgPT4gYm9vbGVhbikge1xuXG4gICAgICAgIFByZWNvbmRpdGlvbnMuYXNzZXJ0Tm90TnVsbChmaWx0ZXIsIFwiZmlsdGVyXCIpO1xuXG4gICAgICAgIGlmICghIChhcmdzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBcmdzIG5vdCBhbiBhcnJheVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFyZzogc3RyaW5nIHwgbnVsbCA9XG4gICAgICAgICAgICBhcmdzLmZpbHRlcigoYXJnKSA9PiBhcmcgIT0gbnVsbCAmJiBmaWx0ZXIoYXJnKSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2N1bXVsYXRvcjogc3RyaW5nIHwgbnVsbCwgY3VycmVudFZhbHVlKSA9PiBhY2N1bXVsYXRvciA9IGN1cnJlbnRWYWx1ZSAhPSBudWxsID8gY3VycmVudFZhbHVlIDogbnVsbCwgbnVsbCk7XG5cbiAgICAgICAgcmV0dXJuIGFyZztcblxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaXNEb2MoYXJnOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEZpbGVQYXRocy5oYXNFeHRlbnNpb24oYXJnLCBcInBkZlwiKSB8fCBGaWxlUGF0aHMuaGFzRXh0ZW5zaW9uKGFyZywgXCJjaHRtbFwiKSB8fCBGaWxlUGF0aHMuaGFzRXh0ZW5zaW9uKGFyZywgXCJwaHpcIik7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpc1VSTChhcmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gYXJnLnN0YXJ0c1dpdGgoXCJodHRwOlwiKSB8fCBhcmcuc3RhcnRzV2l0aChcImh0dHBzOlwiKSB8fCBhcmcuc3RhcnRzV2l0aChcImZpbGU6XCIpO1xuICAgIH1cblxufVxuIl19