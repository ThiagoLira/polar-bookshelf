"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("polar-shared/src/Preconditions");
class Line {
    constructor(start, end, axis) {
        this.start = Preconditions_1.Preconditions.assertNumber(start, "start");
        this.end = Preconditions_1.Preconditions.assertNumber(end, "end");
        this.axis = axis;
    }
    get width() {
        return this.end - this.start;
    }
    get length() {
        return this.end - this.start;
    }
    containsPoint(pt) {
        return this.within(pt);
    }
    within(pt) {
        return this.start <= pt && pt <= this.end;
    }
    overlaps(line) {
        Preconditions_1.Preconditions.assertNotNull(line, "line");
        return this.containsPoint(line.start) || this.containsPoint(line.end);
    }
    toString(fmt) {
        if (fmt === "interval") {
            return `[${this.start},${this.end}]`;
        }
        return `{start: ${this.start}, end: ${this.end}}`;
    }
    multiply(scalar) {
        return new Line(this.start * scalar, this.end * scalar, this.axis);
    }
    floor() {
        return new Line(Math.floor(this.start), Math.floor(this.end), this.axis);
    }
    toJSON() {
        return {
            axis: this.axis,
            start: this.start,
            end: this.end,
            length: this.length
        };
    }
    static interval(start, pt, end) {
        return start <= pt && pt <= end;
    }
    static builder() {
        return new LineBuilder();
    }
}
exports.Line = Line;
class LineBuilder {
    setStart(value) {
        this.start = value;
        return this;
    }
    setEnd(value) {
        this.end = value;
        return this;
    }
    setLength(value) {
        this.length = value;
        return this;
    }
    setAxis(value) {
        this.axis = value;
        return this;
    }
    build() {
        let start = Preconditions_1.notNull(this.start);
        if (!Preconditions_1.isPresent(this.end) && Preconditions_1.isPresent(this.length)) {
            this.end = start + this.length;
        }
        let end = Preconditions_1.notNull(this.end);
        return new Line(start, end);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkxpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrRUFBaUY7QUFNakYsTUFBYSxJQUFJO0lBWWIsWUFBWSxLQUFhLEVBQUUsR0FBVyxFQUFFLElBQWE7UUFDakQsSUFBSSxDQUFDLEtBQUssR0FBRyw2QkFBYSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLEdBQUcsR0FBRyw2QkFBYSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFFckIsQ0FBQztJQVNELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBU0QsYUFBYSxDQUFDLEVBQVU7UUFDcEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFPRCxNQUFNLENBQUMsRUFBVTtRQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDOUMsQ0FBQztJQVFELFFBQVEsQ0FBQyxJQUFVO1FBQ2YsNkJBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBSTFDLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQU9ELFFBQVEsQ0FBQyxHQUFXO1FBRWhCLElBQUcsR0FBRyxLQUFLLFVBQVUsRUFBRTtZQUNuQixPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7U0FDeEM7UUFFRCxPQUFPLFdBQVcsSUFBSSxDQUFDLEtBQUssVUFBVSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7SUFFdEQsQ0FBQztJQVNELFFBQVEsQ0FBQyxNQUFjO1FBQ25CLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFLRCxLQUFLO1FBQ0QsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE1BQU07UUFFRixPQUFPO1lBQ0gsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1lBQ2pCLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRztZQUNiLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtTQUN0QixDQUFDO0lBRU4sQ0FBQztJQUVELE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBYSxFQUFFLEVBQVUsRUFBRSxHQUFXO1FBQ2xELE9BQU8sS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksR0FBRyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBTztRQUNWLE9BQU8sSUFBSSxXQUFXLEVBQUUsQ0FBQztJQUM3QixDQUFDO0NBRUo7QUF4SEQsb0JBd0hDO0FBRUQsTUFBTSxXQUFXO0lBVWIsUUFBUSxDQUFDLEtBQWE7UUFDbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFhO1FBQ2hCLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxTQUFTLENBQUMsS0FBYTtRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsT0FBTyxDQUFDLEtBQWE7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDbEIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELEtBQUs7UUFFRCxJQUFJLEtBQUssR0FBRyx1QkFBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVoQyxJQUFHLENBQUUseUJBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUkseUJBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDaEQsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU8sQ0FBQztTQUNuQztRQUVELElBQUksR0FBRyxHQUFHLHVCQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTVCLE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRWhDLENBQUM7Q0FFSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNQcmVzZW50LCBub3ROdWxsLCBQcmVjb25kaXRpb25zfSBmcm9tICdwb2xhci1zaGFyZWQvc3JjL1ByZWNvbmRpdGlvbnMnO1xuXG5cbi8qKlxuICogU2ltcGxlIGxpbmUgd2l0aCBqdXN0IGEgc3RhcnQgYW5kIGVuZC5cbiAqL1xuZXhwb3J0IGNsYXNzIExpbmUge1xuXG4gICAgcHVibGljIHJlYWRvbmx5IHN0YXJ0OiBudW1iZXI7XG4gICAgcHVibGljIHJlYWRvbmx5IGVuZDogbnVtYmVyO1xuICAgIHB1YmxpYyByZWFkb25seSBheGlzPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRcbiAgICAgKiBAcGFyYW0gZW5kXG4gICAgICogQHBhcmFtIFtheGlzXSBPcHRpb25hbCBheGlzIHBhcmFtZXRlciAoJ3gnIG9yICd5JylcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgYXhpcz86IHN0cmluZykge1xuICAgICAgICB0aGlzLnN0YXJ0ID0gUHJlY29uZGl0aW9ucy5hc3NlcnROdW1iZXIoc3RhcnQsIFwic3RhcnRcIik7XG4gICAgICAgIHRoaXMuZW5kID0gUHJlY29uZGl0aW9ucy5hc3NlcnROdW1iZXIoZW5kLCBcImVuZFwiKTtcbiAgICAgICAgdGhpcy5heGlzID0gYXhpczsgLy8gVE9ETyB2YWxpZGF0ZVxuICAgICAgICAvLyB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGxpbmUuIE5vdCB0byBiZSBjb25mdXNlZCB3aXRoIHRoZSB3aWR0aCBvZiBhIHJlY3QuXG4gICAgICpcbiAgICAgKiBARGVwcmVjYXRlZCBUaGUgZGltZW5zaW9uIG9mIGEgbGluZSBpcyBsZW5ndGguIE5vdCB3aWR0aC4gVXNlIGxlbmd0aCgpXG4gICAgICogaW5zdGVhZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmQgLSB0aGlzLnN0YXJ0O1xuICAgIH1cblxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZCAtIHRoaXMuc3RhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIHBvaW50IGlzIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25cbiAgICAgKiBvZiB0aGUgbGluZSAoaW5jbHVzaXZlKVxuICAgICAqXG4gICAgICogQHBhcmFtIHB0IHtudW1iZXJ9XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjb250YWluc1BvaW50KHB0OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aGluKHB0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgcG9pbnQgaXMgd2l0aGluIHRoZSBzdGFydCBhbmQgZW5kIHBvaW50cyBvZiB0aGlzIGxpbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHQge251bWJlcn1cbiAgICAgKi9cbiAgICB3aXRoaW4ocHQ6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydCA8PSBwdCAmJiBwdCA8PSB0aGlzLmVuZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgZ2l2ZW4gbGluZSBvdmVybGFwcyB0aGUgY3VycmVudCBsaW5lLiAgSUUgZWl0aGVyIHRoZSBzdGFydFxuICAgICAqIG9yIGVuZCBwb2ludCBvbiB0aGUgZ2l2ZW4gbGluZSBpcyBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHBvaW50cyBvZiB0aGVcbiAgICAgKiBjdXJyZW50IGxpbmUuXG4gICAgICpcbiAgICAgKi9cbiAgICBvdmVybGFwcyhsaW5lOiBMaW5lKTogYm9vbGVhbiB7XG4gICAgICAgIFByZWNvbmRpdGlvbnMuYXNzZXJ0Tm90TnVsbChsaW5lLCBcImxpbmVcIik7XG5cbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkRFQlVHOiAlcyB2cyAlc1wiLCB0aGlzLnRvU3RyaW5nKFwiaW50ZXJ2YWxcIiksIGxpbmUudG9TdHJpbmcoXCJpbnRlcnZhbFwiKSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNQb2ludChsaW5lLnN0YXJ0KSB8fCB0aGlzLmNvbnRhaW5zUG9pbnQobGluZS5lbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIFtmbXRdIG9wdGlvbmFsIGZvcm1hdCBwYXJhbWV0ZXIuIE1heSBiZSAnaW50ZXJ2YWwnIGZvciBpbnRlcnZhbCBub3RhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdG9TdHJpbmcoZm10OiBzdHJpbmcpIHtcblxuICAgICAgICBpZihmbXQgPT09IFwiaW50ZXJ2YWxcIikge1xuICAgICAgICAgICAgcmV0dXJuIGBbJHt0aGlzLnN0YXJ0fSwke3RoaXMuZW5kfV1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGB7c3RhcnQ6ICR7dGhpcy5zdGFydH0sIGVuZDogJHt0aGlzLmVuZH19YDtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGEgbmV3IGxpbmUgYmFzZWQgb24gdGhlIGdpdmVuIHNjYWxhci4gIEVzc2VudGlhbGx5IHRoaXMgbW9kZWxzXG4gICAgICogdGhlIGxpbmUgYXMgYSB2ZWN0b3Igd2l0aCB6ZXJvIGFzIHRoZSBvcmlnaW4gYW5kIGxlbmd0aCBhcyB0aGUgbWFnbml0dWRlXG4gICAgICogYW5kIHdlIGp1c3QgYXBwbHkgdGhlIHNjYWxhciB0byBidWlsZCB0aGUgbmV3IHZlY3RvciB3aXRoIGEgZGlmZmVyZW50XG4gICAgICogc3RhcnQgb3JpZ2luLlxuICAgICAqXG4gICAgICovXG4gICAgbXVsdGlwbHkoc2NhbGFyOiBudW1iZXIpOiBMaW5lIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lKHRoaXMuc3RhcnQgKiBzY2FsYXIsIHRoaXMuZW5kICogc2NhbGFyLCB0aGlzLmF4aXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgTWF0aC5mbG9vciBvbiB0aGUgcG9pbnRzIGluIHRoaXMgbGluZS5cbiAgICAgKi9cbiAgICBmbG9vcigpOiBMaW5lIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lKE1hdGguZmxvb3IodGhpcy5zdGFydCksIE1hdGguZmxvb3IodGhpcy5lbmQpLCB0aGlzLmF4aXMpO1xuICAgIH1cblxuICAgIHRvSlNPTigpIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXhpczogdGhpcy5heGlzLFxuICAgICAgICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHRoaXMuZW5kLFxuICAgICAgICAgICAgbGVuZ3RoOiB0aGlzLmxlbmd0aFxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgc3RhdGljIGludGVydmFsKHN0YXJ0OiBudW1iZXIsIHB0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzdGFydCA8PSBwdCAmJiBwdCA8PSBlbmQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGJ1aWxkZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZUJ1aWxkZXIoKTtcbiAgICB9XG5cbn1cblxuY2xhc3MgTGluZUJ1aWxkZXIge1xuXG4gICAgcHJpdmF0ZSBzdGFydD86IG51bWJlcjtcblxuICAgIHByaXZhdGUgZW5kPzogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBsZW5ndGg/OiBudW1iZXI7XG5cbiAgICBwcml2YXRlIGF4aXM/OiBzdHJpbmc7XG5cbiAgICBzZXRTdGFydCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0RW5kKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmQgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0TGVuZ3RoKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0QXhpcyh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXhpcyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBidWlsZCgpIHtcblxuICAgICAgICBsZXQgc3RhcnQgPSBub3ROdWxsKHRoaXMuc3RhcnQpO1xuXG4gICAgICAgIGlmKCEgaXNQcmVzZW50KHRoaXMuZW5kKSAmJiBpc1ByZXNlbnQodGhpcy5sZW5ndGgpKSB7XG4gICAgICAgICAgICB0aGlzLmVuZCA9IHN0YXJ0ICsgdGhpcy5sZW5ndGghO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVuZCA9IG5vdE51bGwodGhpcy5lbmQpO1xuXG4gICAgICAgIHJldHVybiBuZXcgTGluZShzdGFydCwgZW5kKTtcblxuICAgIH1cblxufVxuIl19