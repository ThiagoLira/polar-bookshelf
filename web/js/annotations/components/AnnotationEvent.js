"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const TraceEvent_1 = require("../../proxies/TraceEvent");
const Preconditions_1 = require("polar-shared/src/Preconditions");
class AnnotationEvent extends TraceEvent_1.TraceEvent {
    constructor(opts = {}) {
        super(opts);
        this.id = opts.id;
        this.docMeta = opts.docMeta;
        this.pageMeta = opts.pageMeta;
        this.pageNum = opts.pageNum;
        this.traceEvent = opts.traceEvent;
        this.container = opts.container;
        if (this.value) {
            this.id = this.value.id;
        }
        else if (this.previousValue) {
            this.id = this.previousValue.id;
        }
        Preconditions_1.Preconditions.assertPresent(this.pageMeta, "pageMeta");
    }
}
exports.AnnotationEvent = AnnotationEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5ub3RhdGlvbkV2ZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQW5ub3RhdGlvbkV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseURBQW9EO0FBQ3BELGtFQUE2RDtBQU83RCxNQUFhLGVBQWdCLFNBQVEsdUJBQVU7SUEyQzNDLFlBQVksT0FBWSxFQUFFO1FBRXRCLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVaLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQzlCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM1QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBRWhDLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNaLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7U0FDM0I7YUFBTSxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDM0IsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztTQUNuQztRQUVELDZCQUFhLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFFM0QsQ0FBQztDQUVKO0FBaEVELDBDQWdFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VHJhY2VFdmVudH0gZnJvbSAnLi4vLi4vcHJveGllcy9UcmFjZUV2ZW50JztcbmltcG9ydCB7UHJlY29uZGl0aW9uc30gZnJvbSAncG9sYXItc2hhcmVkL3NyYy9QcmVjb25kaXRpb25zJztcbmltcG9ydCB7UGFnZU1ldGF9IGZyb20gJy4uLy4uL21ldGFkYXRhL1BhZ2VNZXRhJztcbmltcG9ydCB7RG9jTWV0YX0gZnJvbSAnLi4vLi4vbWV0YWRhdGEvRG9jTWV0YSc7XG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb250YWluZXJzL0NvbnRhaW5lcic7XG5pbXBvcnQge0lQYWdlTWV0YX0gZnJvbSBcInBvbGFyLXNoYXJlZC9zcmMvbWV0YWRhdGEvSVBhZ2VNZXRhXCI7XG5pbXBvcnQge0lEb2NNZXRhfSBmcm9tIFwicG9sYXItc2hhcmVkL3NyYy9tZXRhZGF0YS9JRG9jTWV0YVwiO1xuXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbkV2ZW50IGV4dGVuZHMgVHJhY2VFdmVudCB7XG5cblxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBmb3IgdGhpcyBhbm5vdGF0aW9uLlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgaWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHR5cGUge0RvY01ldGF9XG4gICAgICovXG4gICAgcHVibGljIGRvY01ldGE6IElEb2NNZXRhO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UGFnZU1ldGF9XG4gICAgICovXG4gICAgcHVibGljIHBhZ2VNZXRhOiBJUGFnZU1ldGE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGFnZSB3ZSdyZSB3b3JraW5nIHdpdGguXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBwYWdlTnVtOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmF3IFRyYWNlRXZlbnQgZm9yIHRoaXMgYW5ub3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUcmFjZUV2ZW50fVxuICAgICAqL1xuICAgIHB1YmxpYyB0cmFjZUV2ZW50OiBUcmFjZUV2ZW50O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRhaW5lciB3aGljaCBob2xkcyB0aGlzIGFubm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Q29udGFpbmVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBjb250YWluZXI6IENvbnRhaW5lcjtcblxuICAgIGNvbnN0cnVjdG9yKG9wdHM6IGFueSA9IHt9KSB7XG5cbiAgICAgICAgc3VwZXIob3B0cyk7XG5cbiAgICAgICAgdGhpcy5pZCA9IG9wdHMuaWQ7XG4gICAgICAgIHRoaXMuZG9jTWV0YSA9IG9wdHMuZG9jTWV0YTtcbiAgICAgICAgdGhpcy5wYWdlTWV0YSA9IG9wdHMucGFnZU1ldGE7XG4gICAgICAgIHRoaXMucGFnZU51bSA9IG9wdHMucGFnZU51bTtcbiAgICAgICAgdGhpcy50cmFjZUV2ZW50ID0gb3B0cy50cmFjZUV2ZW50O1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG9wdHMuY29udGFpbmVyO1xuXG4gICAgICAgIGlmICh0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy52YWx1ZS5pZDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnByZXZpb3VzVmFsdWUuaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBQcmVjb25kaXRpb25zLmFzc2VydFByZXNlbnQodGhpcy5wYWdlTWV0YSwgXCJwYWdlTWV0YVwiKTtcblxuICAgIH1cblxufVxuIl19