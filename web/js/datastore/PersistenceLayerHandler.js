"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class DefaultPersistenceLayerHandler {
    constructor(persistenceLayer) {
        this.persistenceLayer = persistenceLayer;
    }
    addEventListener(listener, fireWithExisting) {
        if (!fireWithExisting || fireWithExisting === 'changed') {
            listener({
                persistenceLayer: this.persistenceLayer,
                state: 'changed'
            });
        }
    }
    get() {
        return this.persistenceLayer;
    }
}
exports.DefaultPersistenceLayerHandler = DefaultPersistenceLayerHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGVyc2lzdGVuY2VMYXllckhhbmRsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQZXJzaXN0ZW5jZUxheWVySGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQW9CQSxNQUFhLDhCQUE4QjtJQUV2QyxZQUE2QixnQkFBNEM7UUFBNUMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUE0QjtJQUV6RSxDQUFDO0lBRU0sZ0JBQWdCLENBQUMsUUFBOEMsRUFDOUMsZ0JBQTRDO1FBRWhFLElBQUksQ0FBRSxnQkFBZ0IsSUFBSSxnQkFBZ0IsS0FBSyxTQUFTLEVBQUU7WUFFdEQsUUFBUSxDQUFDO2dCQUNJLGdCQUFnQixFQUFFLElBQUksQ0FBQyxnQkFBZ0I7Z0JBQ3ZDLEtBQUssRUFBRSxTQUFTO2FBQ25CLENBQUMsQ0FBQztTQUVmO0lBRUwsQ0FBQztJQUVNLEdBQUc7UUFDTixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0NBRUo7QUF4QkQsd0VBd0JDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWdodHdlaWdodCB2ZXJzaW9uIG9mIHRoZSBQZXJzaXN0ZW5jZUxheWVyIHdpdGhvdXQgZGVzdHJ1Y3RpdmUgbWV0aG9kc1xuICogbGlrZSBzdGFydCBvciBjaGFuZ2UuXG4gKi9cbmltcG9ydCB7TGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXJ9IGZyb20gJy4vTGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXInO1xuaW1wb3J0IHtQZXJzaXN0ZW5jZUxheWVyTWFuYWdlckV2ZW50TGlzdGVuZXJ9IGZyb20gJy4vUGVyc2lzdGVuY2VMYXllck1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBlcnNpc3RlbmNlTGF5ZXJIYW5kbGVyIHtcblxuICAgIGdldCgpOiBMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcjtcblxuICAgIGFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXI6IFBlcnNpc3RlbmNlTGF5ZXJNYW5hZ2VyRXZlbnRMaXN0ZW5lcixcbiAgICAgICAgICAgICAgICAgICAgIGZpcmVXaXRoRXhpc3Rpbmc/OiAnY2hhbmdlZCcgfCAnaW5pdGlhbGl6ZWQnKTogdm9pZDtcblxufVxuXG4vKipcbiAqXG4gKlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXJIYW5kbGVyIGltcGxlbWVudHMgUGVyc2lzdGVuY2VMYXllckhhbmRsZXIge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBwZXJzaXN0ZW5jZUxheWVyOiBMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcikge1xuXG4gICAgfVxuXG4gICAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXI6IFBlcnNpc3RlbmNlTGF5ZXJNYW5hZ2VyRXZlbnRMaXN0ZW5lcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlV2l0aEV4aXN0aW5nPzogXCJjaGFuZ2VkXCIgfCBcImluaXRpYWxpemVkXCIpOiB2b2lkIHtcblxuICAgICAgICBpZiAoISBmaXJlV2l0aEV4aXN0aW5nIHx8IGZpcmVXaXRoRXhpc3RpbmcgPT09ICdjaGFuZ2VkJykge1xuXG4gICAgICAgICAgICBsaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VMYXllcjogdGhpcy5wZXJzaXN0ZW5jZUxheWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY2hhbmdlZCdcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBnZXQoKTogTGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZUxheWVyO1xuICAgIH1cblxufVxuXG4iXX0=