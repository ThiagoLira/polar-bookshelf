"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = require("polar-shared/src/logger/Logger");
const DefaultPersistenceLayer_1 = require("../DefaultPersistenceLayer");
const AdvertisingPersistenceLayer_1 = require("../advertiser/AdvertisingPersistenceLayer");
const HybridRemoteDatastores_1 = require("../HybridRemoteDatastores");
const log = Logger_1.Logger.create();
class RemotePersistenceLayerFactory {
    static create() {
        log.info("Using remote persistence layer and disk store");
        const datastore = HybridRemoteDatastores_1.HybridRemoteDatastores.create();
        const defaultPersistenceLayer = new DefaultPersistenceLayer_1.DefaultPersistenceLayer(datastore);
        const advertisingPersistenceLayer = new AdvertisingPersistenceLayer_1.AdvertisingPersistenceLayer(defaultPersistenceLayer);
        return advertisingPersistenceLayer;
    }
}
exports.RemotePersistenceLayerFactory = RemotePersistenceLayerFactory;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVtb3RlUGVyc2lzdGVuY2VMYXllckZhY3RvcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJSZW1vdGVQZXJzaXN0ZW5jZUxheWVyRmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJEQUFzRDtBQUV0RCx3RUFBbUU7QUFDbkUsMkZBQXNGO0FBQ3RGLHNFQUFpRTtBQUVqRSxNQUFNLEdBQUcsR0FBRyxlQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFFNUIsTUFBYSw2QkFBNkI7SUFFL0IsTUFBTSxDQUFDLE1BQU07UUFFaEIsR0FBRyxDQUFDLElBQUksQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDO1FBRTFELE1BQU0sU0FBUyxHQUFHLCtDQUFzQixDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRWxELE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxpREFBdUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2RSxNQUFNLDJCQUEyQixHQUFHLElBQUkseURBQTJCLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUU3RixPQUFPLDJCQUEyQixDQUFDO0lBRXZDLENBQUM7Q0FFSjtBQWZELHNFQWVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtMb2dnZXJ9IGZyb20gJ3BvbGFyLXNoYXJlZC9zcmMvbG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQge0xpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyfSBmcm9tICcuLi9MaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcic7XG5pbXBvcnQge0RlZmF1bHRQZXJzaXN0ZW5jZUxheWVyfSBmcm9tICcuLi9EZWZhdWx0UGVyc2lzdGVuY2VMYXllcic7XG5pbXBvcnQge0FkdmVydGlzaW5nUGVyc2lzdGVuY2VMYXllcn0gZnJvbSAnLi4vYWR2ZXJ0aXNlci9BZHZlcnRpc2luZ1BlcnNpc3RlbmNlTGF5ZXInO1xuaW1wb3J0IHtIeWJyaWRSZW1vdGVEYXRhc3RvcmVzfSBmcm9tICcuLi9IeWJyaWRSZW1vdGVEYXRhc3RvcmVzJztcblxuY29uc3QgbG9nID0gTG9nZ2VyLmNyZWF0ZSgpO1xuXG5leHBvcnQgY2xhc3MgUmVtb3RlUGVyc2lzdGVuY2VMYXllckZhY3Rvcnkge1xuXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUoKTogTGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXIge1xuXG4gICAgICAgIGxvZy5pbmZvKFwiVXNpbmcgcmVtb3RlIHBlcnNpc3RlbmNlIGxheWVyIGFuZCBkaXNrIHN0b3JlXCIpO1xuXG4gICAgICAgIGNvbnN0IGRhdGFzdG9yZSA9IEh5YnJpZFJlbW90ZURhdGFzdG9yZXMuY3JlYXRlKCk7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXIgPSBuZXcgRGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXIoZGF0YXN0b3JlKTtcbiAgICAgICAgY29uc3QgYWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyID0gbmV3IEFkdmVydGlzaW5nUGVyc2lzdGVuY2VMYXllcihkZWZhdWx0UGVyc2lzdGVuY2VMYXllcik7XG5cbiAgICAgICAgcmV0dXJuIGFkdmVydGlzaW5nUGVyc2lzdGVuY2VMYXllcjtcblxuICAgIH1cblxufVxuIl19