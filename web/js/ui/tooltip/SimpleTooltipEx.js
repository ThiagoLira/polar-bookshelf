"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const react_1 = __importDefault(require("react"));
const Tooltip_1 = __importDefault(require("reactstrap/lib/Tooltip"));
const Optional_1 = require("polar-shared/src/util/ts/Optional");
class SimpleTooltipEx extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.id = 'tooltip-parent-' + Math.floor(1000000 * Math.random());
        this.state = {
            open: false
        };
        this.onMouseEnter = this.onMouseEnter.bind(this);
        this.onMouseLeave = this.onMouseLeave.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
        this.deactivate = this.deactivate.bind(this);
        this.schedule = this.schedule.bind(this);
        this.trigger = this.trigger.bind(this);
        this.show = Optional_1.Optional.of(this.props.show).getOrElse(1000);
    }
    render() {
        const placement = this.props.placement || 'bottom';
        return (react_1.default.createElement("div", { className: "", onMouseEnter: () => this.onMouseEnter(), onMouseMove: () => this.onMouseMove(), onMouseLeave: () => this.onMouseLeave(), onMouseDown: () => this.deactivate(), onMouseUp: () => this.deactivate(), onClick: () => this.deactivate(), onContextMenu: () => this.deactivate() },
            react_1.default.createElement("div", { id: this.id }, this.props.children),
            react_1.default.createElement(Tooltip_1.default, { style: Object.assign({ maxWidth: '325px', textAlign: 'justify' }, this.props.style || {}), isOpen: this.state.open, className: "", placement: placement, delay: { show: 0, hide: 0 }, target: this.id }, this.props.text)));
    }
    onMouseEnter() {
        this.schedule();
    }
    onMouseMove() {
        if (this.show === 0) {
            return;
        }
        if (this.state.open) {
            this.setState({ open: false });
        }
        else {
            this.schedule();
        }
    }
    onMouseLeave() {
        this.deactivate();
    }
    deactivate() {
        if (this.timeout) {
            window.clearTimeout(this.timeout);
        }
        this.setState({ open: false });
    }
    schedule() {
        if (this.show === 0) {
            this.trigger();
            return;
        }
        if (this.timeout) {
            window.clearTimeout(this.timeout);
        }
        this.timeout = window.setTimeout(() => this.trigger(), this.show);
    }
    trigger() {
        if (this.props.disabled) {
            return;
        }
        this.setState({ open: true });
    }
}
exports.SimpleTooltipEx = SimpleTooltipEx;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2ltcGxlVG9vbHRpcEV4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2ltcGxlVG9vbHRpcEV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLGtEQUEwQjtBQUMxQixxRUFBNkM7QUFDN0MsZ0VBQTJEO0FBRTNELE1BQWEsZUFBZ0IsU0FBUSxlQUFLLENBQUMsU0FBeUI7SUFRaEUsWUFBWSxLQUFhO1FBQ3JCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUViLElBQUksQ0FBQyxFQUFFLEdBQUcsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFFbEUsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULElBQUksRUFBRSxLQUFLO1NBQ2QsQ0FBQztRQUVGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV6QyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXZDLElBQUksQ0FBQyxJQUFJLEdBQUcsbUJBQVEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FB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QVEsQ0FBQyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7Q0FFSjtBQTlIRCwwQ0E4SEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgcmVhY3Qvbm8tbXVsdGktY29tcDogMCwgcmVhY3QvcHJvcC10eXBlczogMCAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBUb29sdGlwIGZyb20gJ3JlYWN0c3RyYXAvbGliL1Rvb2x0aXAnO1xuaW1wb3J0IHtPcHRpb25hbH0gZnJvbSAncG9sYXItc2hhcmVkL3NyYy91dGlsL3RzL09wdGlvbmFsJztcblxuZXhwb3J0IGNsYXNzIFNpbXBsZVRvb2x0aXBFeCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuXG4gICAgcHJpdmF0ZSB0aW1lb3V0PzogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nO1xuXG4gICAgcHJpdmF0ZSBzaG93OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLmlkID0gJ3Rvb2x0aXAtcGFyZW50LScgKyBNYXRoLmZsb29yKDEwMDAwMDAgKiBNYXRoLnJhbmRvbSgpKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgb3BlbjogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uTW91c2VFbnRlciA9IHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Nb3VzZUxlYXZlID0gdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZWFjdGl2YXRlID0gdGhpcy5kZWFjdGl2YXRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zY2hlZHVsZSA9IHRoaXMuc2NoZWR1bGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIgPSB0aGlzLnRyaWdnZXIuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3cgPSBPcHRpb25hbC5vZih0aGlzLnByb3BzLnNob3cpLmdldE9yRWxzZSgxMDAwKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICAgY29uc3QgcGxhY2VtZW50ID0gdGhpcy5wcm9wcy5wbGFjZW1lbnQgfHwgJ2JvdHRvbSc7XG5cbiAgICAgICAgcmV0dXJuIChcblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJcIlxuICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHRoaXMub25Nb3VzZUVudGVyKCl9XG4gICAgICAgICAgICAgICAgIG9uTW91c2VNb3ZlPXsoKSA9PiB0aGlzLm9uTW91c2VNb3ZlKCl9XG4gICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gdGhpcy5vbk1vdXNlTGVhdmUoKX1cbiAgICAgICAgICAgICAgICAgb25Nb3VzZURvd249eygpID0+IHRoaXMuZGVhY3RpdmF0ZSgpfVxuICAgICAgICAgICAgICAgICBvbk1vdXNlVXA9eygpID0+IHRoaXMuZGVhY3RpdmF0ZSgpfVxuICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLmRlYWN0aXZhdGUoKX1cbiAgICAgICAgICAgICAgICAgb25Db250ZXh0TWVudT17KCkgPT4gdGhpcy5kZWFjdGl2YXRlKCl9PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBpZD17dGhpcy5pZH0+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzMyNXB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdqdXN0aWZ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnByb3BzLnN0eWxlIHx8IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e3RoaXMuc3RhdGUub3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD17cGxhY2VtZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5PXt7c2hvdzogMCwgaGlkZTogMH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXt0aGlzLmlkfT5cblxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy50ZXh0fVxuXG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuXG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbk1vdXNlRW50ZXIoKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uTW91c2VNb3ZlKCkge1xuXG4gICAgICAgIGlmICh0aGlzLnNob3cgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHByaXZhdGUgb25Nb3VzZUxlYXZlKCkge1xuICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlYWN0aXZhdGUoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogZmFsc2V9KTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgc2NoZWR1bGUoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyaWdnZXIoKSwgdGhpcy5zaG93KTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgdHJpZ2dlcigpIHtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0pO1xuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICByZWFkb25seSB0ZXh0OiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgcGxhY2VtZW50PzogJ2JvdHRvbScgfCAndG9wJyB8ICdyaWdodCcgfCAnbGVmdCc7XG4gICAgcmVhZG9ubHkgc2hvdz86IG51bWJlcjtcbiAgICByZWFkb25seSBzdHlsZT86IFJlYWN0LkNTU1Byb3BlcnRpZXM7XG4gICAgcmVhZG9ubHkgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgSVN0YXRlIHtcbiAgICByZWFkb25seSBvcGVuOiBib29sZWFuO1xufVxuXG5cblxuIl19