"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = require("polar-shared/src/logger/Logger");
const Elements_1 = require("../../util/Elements");
const Preconditions_1 = require("polar-shared/src/Preconditions");
const Strings_1 = require("polar-shared/src/util/Strings");
const log = Logger_1.Logger.create();
class ProgressLog {
    constructor() {
    }
    update(progressEvent) {
        log.info("Got progress update: ", progressEvent.percentage);
        this.updateProgress(progressEvent);
        this.updateLogView(progressEvent);
    }
    updateProgress(progressEvent) {
        let progressElement = document.querySelector("progress");
        progressElement.value = progressEvent.percentage;
    }
    updateLogView(progressEvent) {
        if (Strings_1.Strings.empty(progressEvent.message)) {
            return;
        }
        let logElement = Preconditions_1.notNull(document.querySelector(".log"));
        let lineElement = Elements_1.Elements.createWrapperElementHTML(`<div class="">${progressEvent.message}</div>`);
        logElement.appendChild(lineElement);
    }
}
exports.ProgressLog = ProgressLog;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZ3Jlc3NMb2cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQcm9ncmVzc0xvZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJEQUFzRDtBQUN0RCxrREFBNkM7QUFDN0Msa0VBQXVEO0FBRXZELDJEQUFzRDtBQUV0RCxNQUFNLEdBQUcsR0FBRyxlQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFPNUIsTUFBYSxXQUFXO0lBRXBCO0lBRUEsQ0FBQztJQU1ELE1BQU0sQ0FBQyxhQUE0QjtRQUUvQixHQUFHLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUU1RCxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFdEMsQ0FBQztJQUVPLGNBQWMsQ0FBQyxhQUE0QjtRQUUvQyxJQUFJLGVBQWUsR0FBd0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RSxlQUFlLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxVQUFVLENBQUM7SUFFckQsQ0FBQztJQUVPLGFBQWEsQ0FBQyxhQUE0QjtRQUU5QyxJQUFHLGlCQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNyQyxPQUFPO1NBQ1Y7UUFFRCxJQUFJLFVBQVUsR0FBRyx1QkFBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUV6RCxJQUFJLFdBQVcsR0FBRyxtQkFBUSxDQUFDLHdCQUF3QixDQUFDLGlCQUFpQixhQUFhLENBQUMsT0FBTyxRQUFRLENBQUMsQ0FBQztRQUVwRyxVQUFVLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBRXhDLENBQUM7Q0FFSjtBQXhDRCxrQ0F3Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0xvZ2dlcn0gZnJvbSAncG9sYXItc2hhcmVkL3NyYy9sb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7RWxlbWVudHN9IGZyb20gJy4uLy4uL3V0aWwvRWxlbWVudHMnO1xuaW1wb3J0IHtub3ROdWxsfSBmcm9tICdwb2xhci1zaGFyZWQvc3JjL1ByZWNvbmRpdGlvbnMnO1xuaW1wb3J0IHtQcm9ncmVzc0V2ZW50fSBmcm9tICcuL1Byb2dyZXNzRXZlbnQnO1xuaW1wb3J0IHtTdHJpbmdzfSBmcm9tIFwicG9sYXItc2hhcmVkL3NyYy91dGlsL1N0cmluZ3NcIjtcblxuY29uc3QgbG9nID0gTG9nZ2VyLmNyZWF0ZSgpO1xuXG4vKipcbiAqIEEgUHJvZ3Jlc3NMb2cga2VlcHMgYWxsb3dzIHVzIHRvIHVwZGF0ZSBhIGxvZyBsaW5lIGRpc3BsYXkgYW5kIGEgcHJvZ3Jlc3NcbiAqIGJhciB3aGlsZSBhIHByb2Nlc3MgaXMgbW92aW5nIGZvcndhcmQuICBVc2VkIHZpYSBzeW5jLCBjYXB0dXJlLCBhbmQgb3RoZXJcbiAqIGZ1dHVyZSBzZXJ2aWNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb2dyZXNzTG9nIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gd2Ugc2hvdWxkIHVwZGF0ZSB0aGUgcHJvZ3Jlc3Mgb2Ygb3VyIGFwcCBhcyBpdCBtb3ZlcyBmb3J3YXJkXG4gICAgICogYW5kIGNvbXBsZXRlcyB3b3JrLlxuICAgICAqL1xuICAgIHVwZGF0ZShwcm9ncmVzc0V2ZW50OiBQcm9ncmVzc0V2ZW50KSB7XG5cbiAgICAgICAgbG9nLmluZm8oXCJHb3QgcHJvZ3Jlc3MgdXBkYXRlOiBcIiwgcHJvZ3Jlc3NFdmVudC5wZXJjZW50YWdlKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKHByb2dyZXNzRXZlbnQpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxvZ1ZpZXcocHJvZ3Jlc3NFdmVudCk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzRXZlbnQ6IFByb2dyZXNzRXZlbnQpIHtcblxuICAgICAgICBsZXQgcHJvZ3Jlc3NFbGVtZW50ID0gPEhUTUxQcm9ncmVzc0VsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInByb2dyZXNzXCIpO1xuICAgICAgICBwcm9ncmVzc0VsZW1lbnQudmFsdWUgPSBwcm9ncmVzc0V2ZW50LnBlcmNlbnRhZ2U7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUxvZ1ZpZXcocHJvZ3Jlc3NFdmVudDogUHJvZ3Jlc3NFdmVudCkge1xuXG4gICAgICAgIGlmKFN0cmluZ3MuZW1wdHkocHJvZ3Jlc3NFdmVudC5tZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxvZ0VsZW1lbnQgPSBub3ROdWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9nXCIpKTtcblxuICAgICAgICBsZXQgbGluZUVsZW1lbnQgPSBFbGVtZW50cy5jcmVhdGVXcmFwcGVyRWxlbWVudEhUTUwoYDxkaXYgY2xhc3M9XCJcIj4ke3Byb2dyZXNzRXZlbnQubWVzc2FnZX08L2Rpdj5gKTtcblxuICAgICAgICBsb2dFbGVtZW50LmFwcGVuZENoaWxkKGxpbmVFbGVtZW50KTtcblxuICAgIH1cblxufVxuXG4iXX0=