"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const Rects_1 = require("./Rects");
const Assertions_1 = require("./test/Assertions");
const Rect_1 = require("./Rect");
const RectArt_1 = require("./util/RectArt");
const MockRects_1 = require("./MockRects");
describe('Rects', function () {
    describe('perc', function () {
        it("basic perc", function () {
            const a = Rects_1.Rects.createFromBasicRect({
                top: 0,
                left: 0,
                width: 50,
                height: 50
            });
            const b = Rects_1.Rects.createFromBasicRect({
                top: 0,
                left: 0,
                width: 100,
                height: 100
            });
            const actual = Rects_1.Rects.perc(a, b);
            const expected = {
                "left": 0,
                "top": 0,
                "right": 50,
                "bottom": 50,
                "width": 50,
                "height": 50
            };
            Assertions_1.assertJSON(actual, expected);
        });
    });
    describe('scale', function () {
        it("basic scale", function () {
            let rect = new Rect_1.Rect({
                top: 100,
                left: 100,
                bottom: 200,
                right: 200,
                width: 100,
                height: 100,
            });
            let actual = Rects_1.Rects.scale(rect, 2.0);
            let expected = {
                "left": 200,
                "top": 200,
                "right": 400,
                "bottom": 400,
                "width": 200,
                "height": 200
            };
            Assertions_1.assertJSON(actual, expected);
        });
    });
    describe('intersect + overlap', () => {
        test("not_intersected", false, false);
        test("basic_test", true, true);
        test("intersected_right", true, true);
        test("intersected_left", true, true);
        test("intersected_top", true, true);
        test("intersected_bottom", true, true);
        test("intersected_bottom_left", true, true);
        function test(name, expectedIntersect, expectedOverlap) {
            it(name, () => {
                let rects = MockRects_1.MOCK_RECTS[name];
                console.log("\n" + RectArt_1.RectArt.formatRects([rects.rect0, rects.rect1]).toString());
                chai_1.assert.equal(Rects_1.Rects.intersect(rects.rect0, rects.rect1), expectedIntersect);
                chai_1.assert.equal(Rects_1.Rects.overlap(rects.rect0, rects.rect1), expectedOverlap);
            });
        }
    });
    describe('intersectedPositions', function () {
        it("not intersected", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 300,
                "top": 300,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), []);
        });
        it("intersected right", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 150,
                "top": 100,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), ["right", "top", "bottom"]);
        });
        it("intersected left", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 50,
                "top": 100,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), ["left", "top", "bottom"]);
        });
        it("intersected top", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 50,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), ["left", "right", "top"]);
        });
        it("intersected bottom", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 150,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), ["left", "right", "bottom"]);
        });
        it("intersected bottom left", function () {
            let rect0 = Rects_1.Rects.createFromBasicRect({
                "left": 100,
                "top": 100,
                "width": 100,
                "height": 100
            });
            let rect1 = Rects_1.Rects.createFromBasicRect({
                "left": 50,
                "top": 150,
                "width": 100,
                "height": 100
            });
            Assertions_1.assertJSON(Rects_1.Rects.intersectedPositions(rect0, rect1), ["left", "bottom"]);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVjdHNUZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUmVjdHNUZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQTRCO0FBQzVCLG1DQUE4QjtBQUM5QixrREFBNkM7QUFDN0MsaUNBQTRCO0FBRTVCLDRDQUF1QztBQUN2QywyQ0FBdUM7QUFFdkMsUUFBUSxDQUFDLE9BQU8sRUFBRTtJQUVkLFFBQVEsQ0FBQyxNQUFNLEVBQUU7UUFFYixFQUFFLENBQUMsWUFBWSxFQUFFO1lBRWIsTUFBTSxDQUFDLEdBQUcsYUFBSyxDQUFDLG1CQUFtQixDQUFDO2dCQUNoQyxHQUFHLEVBQUUsQ0FBQztnQkFDTixJQUFJLEVBQUUsQ0FBQztnQkFDUCxLQUFLLEVBQUUsRUFBRTtnQkFDVCxNQUFNLEVBQUUsRUFBRTthQUNiLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxHQUFHLGFBQUssQ0FBQyxtQkFBbUIsQ0FBQztnQkFDaEMsR0FBRyxFQUFFLENBQUM7Z0JBQ04sSUFBSSxFQUFFLENBQUM7Z0JBQ1AsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsTUFBTSxFQUFFLEdBQUc7YUFDZCxDQUFDLENBQUM7WUFFSCxNQUFNLE1BQU0sR0FBRyxhQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVoQyxNQUFNLFFBQVEsR0FBRztnQkFDYixNQUFNLEVBQUUsQ0FBQztnQkFDVCxLQUFLLEVBQUUsQ0FBQztnQkFDUixPQUFPLEVBQUUsRUFBRTtnQkFDWCxRQUFRLEVBQUUsRUFBRTtnQkFDWixPQUFPLEVBQUUsRUFBRTtnQkFDWCxRQUFRLEVBQUUsRUFBRTthQUNmLENBQUM7WUFFRix1QkFBVSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUVqQyxDQUFDLENBQUMsQ0FBQztJQUdQLENBQUMsQ0FBQyxDQUFDO0lBR0gsUUFBUSxDQUFDLE9BQU8sRUFBRTtRQUVkLEVBQUUsQ0FBQyxhQUFhLEVBQUU7WUFFZCxJ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LENBQUM7UUFFdEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMseUJBQXlCLEVBQUU7WUFFMUIsSUFBSSxLQUFLLEdBQUcsYUFBSyxDQUFDLG1CQUFtQixDQUFDO2dCQUNsQyxNQUFNLEVBQUUsR0FBRztnQkFDWCxLQUFLLEVBQUUsR0FBRztnQkFDVixPQUFPLEVBQUUsR0FBRztnQkFDWixRQUFRLEVBQUUsR0FBRzthQUNoQixDQUFDLENBQUM7WUFFSCxJQUFJLEtBQUssR0FBRyxhQUFLLENBQUMsbUJBQW1CLENBQUM7Z0JBQ2xDLE1BQU0sRUFBRSxFQUFFO2dCQUNWLEtBQUssRUFBRSxHQUFHO2dCQUNWLE9BQU8sRUFBRSxHQUFHO2dCQUNaLFFBQVEsRUFBRSxHQUFHO2FBQ2hCLENBQUMsQ0FBQztZQUVILHVCQUFVLENBQUMsYUFBSyxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBRTdFLENBQUMsQ0FBQyxDQUFDO0lBRVAsQ0FBQyxDQUFDLENBQUM7QUFFUCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcbmltcG9ydCB7UmVjdHN9IGZyb20gJy4vUmVjdHMnO1xuaW1wb3J0IHthc3NlcnRKU09OfSBmcm9tICcuL3Rlc3QvQXNzZXJ0aW9ucyc7XG5pbXBvcnQge1JlY3R9IGZyb20gJy4vUmVjdCc7XG5pbXBvcnQge0lSZWN0fSBmcm9tICdwb2xhci1zaGFyZWQvc3JjL3V0aWwvcmVjdHMvSVJlY3QnO1xuaW1wb3J0IHtSZWN0QXJ0fSBmcm9tICcuL3V0aWwvUmVjdEFydCc7XG5pbXBvcnQge01PQ0tfUkVDVFN9IGZyb20gJy4vTW9ja1JlY3RzJztcblxuZGVzY3JpYmUoJ1JlY3RzJywgZnVuY3Rpb24oKSB7XG5cbiAgICBkZXNjcmliZSgncGVyYycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGl0KFwiYmFzaWMgcGVyY1wiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGEgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGIgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgYWN0dWFsID0gUmVjdHMucGVyYyhhLCBiKTtcblxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSB7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDAsXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogMCxcbiAgICAgICAgICAgICAgICBcInJpZ2h0XCI6IDUwLFxuICAgICAgICAgICAgICAgIFwiYm90dG9tXCI6IDUwLFxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogNTAsXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogNTBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFzc2VydEpTT04oYWN0dWFsLCBleHBlY3RlZCk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cbiAgICBkZXNjcmliZSgnc2NhbGUnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICBpdChcImJhc2ljIHNjYWxlXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbGV0IHJlY3QgPSBuZXcgUmVjdCh7XG4gICAgICAgICAgICAgICAgdG9wOiAxMDAsXG4gICAgICAgICAgICAgICAgbGVmdDogMTAwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMjAwLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiAyMDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgYWN0dWFsID0gUmVjdHMuc2NhbGUocmVjdCwgMi4wKTtcblxuICAgICAgICAgICAgbGV0IGV4cGVjdGVkID0ge1xuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAyMDAsXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogMjAwLFxuICAgICAgICAgICAgICAgIFwicmlnaHRcIjogNDAwLFxuICAgICAgICAgICAgICAgIFwiYm90dG9tXCI6IDQwMCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDIwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAyMDBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFzc2VydEpTT04oYWN0dWFsLCBleHBlY3RlZCk7XG5cbiAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG5cbiAgICBkZXNjcmliZSgnaW50ZXJzZWN0ICsgb3ZlcmxhcCcsICgpID0+IHtcblxuICAgICAgICB0ZXN0KFwibm90X2ludGVyc2VjdGVkXCIsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIHRlc3QoXCJiYXNpY190ZXN0XCIsIHRydWUsIHRydWUpO1xuICAgICAgICB0ZXN0KFwiaW50ZXJzZWN0ZWRfcmlnaHRcIiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHRlc3QoXCJpbnRlcnNlY3RlZF9sZWZ0XCIsIHRydWUsIHRydWUpO1xuICAgICAgICB0ZXN0KFwiaW50ZXJzZWN0ZWRfdG9wXCIsIHRydWUsIHRydWUpO1xuICAgICAgICB0ZXN0KFwiaW50ZXJzZWN0ZWRfYm90dG9tXCIsIHRydWUsIHRydWUpO1xuICAgICAgICB0ZXN0KFwiaW50ZXJzZWN0ZWRfYm90dG9tX2xlZnRcIiwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgLy90ZXN0KFwib3ZlcmxhcF9yZWN0MF9vdmVyX3JlY3QxXCIsIGZhbHNlLCB0cnVlKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIG5hbWUge3N0cmluZ30gVGhlIG5hbWUgb2YgdGhlIHRlc3QgYW5kIHRoZSBkYXRhIHRvIGV4dHJhY3QuXG4gICAgICAgICAqIEBwYXJhbSBleHBlY3RlZEludGVyc2VjdCB7Ym9vbGVhbn1cbiAgICAgICAgICogQHBhcmFtIGV4cGVjdGVkT3ZlcmxhcCB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRlc3QobmFtZTogc3RyaW5nLCBleHBlY3RlZEludGVyc2VjdDogYm9vbGVhbiwgZXhwZWN0ZWRPdmVybGFwOiBib29sZWFuKSB7XG5cbiAgICAgICAgICAgIGl0KG5hbWUsICgpID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCByZWN0cyA9IE1PQ0tfUkVDVFNbbmFtZV07XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcblwiICsgUmVjdEFydC5mb3JtYXRSZWN0cyhbcmVjdHMucmVjdDAsIHJlY3RzLnJlY3QxXSkudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwoUmVjdHMuaW50ZXJzZWN0KHJlY3RzLnJlY3QwLCByZWN0cy5yZWN0MSksIGV4cGVjdGVkSW50ZXJzZWN0KTtcbiAgICAgICAgICAgICAgICBhc3NlcnQuZXF1YWwoUmVjdHMub3ZlcmxhcChyZWN0cy5yZWN0MCwgcmVjdHMucmVjdDEpLCBleHBlY3RlZE92ZXJsYXApO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG4gICAgZGVzY3JpYmUoJ2ludGVyc2VjdGVkUG9zaXRpb25zJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgaXQoXCJub3QgaW50ZXJzZWN0ZWRcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBsZXQgcmVjdDAgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAxMDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgcmVjdDEgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogMzAwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDMwMCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAxMDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhc3NlcnRKU09OKFJlY3RzLmludGVyc2VjdGVkUG9zaXRpb25zKHJlY3QwLCByZWN0MSksIFtdKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImludGVyc2VjdGVkIHJpZ2h0XCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbGV0IHJlY3QwID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogMTAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHJlY3QxID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDE1MCxcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogMTAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXNzZXJ0SlNPTihSZWN0cy5pbnRlcnNlY3RlZFBvc2l0aW9ucyhyZWN0MCwgcmVjdDEpLCBbXCJyaWdodFwiLCBcInRvcFwiLCBcImJvdHRvbVwiXSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJpbnRlcnNlY3RlZCBsZWZ0XCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbGV0IHJlY3QwID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogMTAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHJlY3QxID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDUwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAxMDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhc3NlcnRKU09OKFJlY3RzLmludGVyc2VjdGVkUG9zaXRpb25zKHJlY3QwLCByZWN0MSksIFtcImxlZnRcIiwgXCJ0b3BcIiwgXCJib3R0b21cIl0pO1xuXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgaXQoXCJpbnRlcnNlY3RlZCB0b3BcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBsZXQgcmVjdDAgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAxMDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgcmVjdDEgPSBSZWN0cy5jcmVhdGVGcm9tQmFzaWNSZWN0KHtcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDUwLFxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IDEwMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFzc2VydEpTT04oUmVjdHMuaW50ZXJzZWN0ZWRQb3NpdGlvbnMocmVjdDAsIHJlY3QxKSwgW1wibGVmdFwiLCBcInJpZ2h0XCIsIFwidG9wXCJdKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImludGVyc2VjdGVkIGJvdHRvbVwiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGxldCByZWN0MCA9IFJlY3RzLmNyZWF0ZUZyb21CYXNpY1JlY3Qoe1xuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IDEwMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCByZWN0MSA9IFJlY3RzLmNyZWF0ZUZyb21CYXNpY1JlY3Qoe1xuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogMTUwLFxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogMTAwLFxuICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IDEwMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFzc2VydEpTT04oUmVjdHMuaW50ZXJzZWN0ZWRQb3NpdGlvbnMocmVjdDAsIHJlY3QxKSwgW1wibGVmdFwiLCBcInJpZ2h0XCIsIFwiYm90dG9tXCJdKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpdChcImludGVyc2VjdGVkIGJvdHRvbSBsZWZ0XCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbGV0IHJlY3QwID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMDAsXG4gICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogMTAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHJlY3QxID0gUmVjdHMuY3JlYXRlRnJvbUJhc2ljUmVjdCh7XG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDUwLFxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDE1MCxcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAxMDBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhc3NlcnRKU09OKFJlY3RzLmludGVyc2VjdGVkUG9zaXRpb25zKHJlY3QwLCByZWN0MSksIFtcImxlZnRcIiwgXCJib3R0b21cIl0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pO1xuIl19