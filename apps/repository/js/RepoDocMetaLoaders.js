"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Throttler_1 = require("../../../web/js/datastore/Throttler");
class RepoDocMetaLoaders {
    static addThrottlingEventListener(repoDocMetaLoader, callback) {
        const throttlerOpts = { maxRequests: 250, maxTimeout: 500 };
        const refreshThrottler = new Throttler_1.Throttler(() => callback(), throttlerOpts);
        return repoDocMetaLoader.addEventListener(event => {
            refreshThrottler.exec();
        });
    }
}
exports.RepoDocMetaLoaders = RepoDocMetaLoaders;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVwb0RvY01ldGFMb2FkZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUmVwb0RvY01ldGFMb2FkZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUVBQThEO0FBSTlELE1BQWEsa0JBQWtCO0lBT3BCLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxpQkFBb0MsRUFDcEMsUUFBb0I7UUF3QnpELE1BQU0sYUFBYSxHQUFHLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFFNUQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLHFCQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFFeEUsT0FBTyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUU5QyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUU1QixDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FFSjtBQTVDRCxnREE0Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1Rocm90dGxlcn0gZnJvbSAnLi4vLi4vLi4vd2ViL2pzL2RhdGFzdG9yZS9UaHJvdHRsZXInO1xuaW1wb3J0IHtSZXBvRG9jTWV0YUxvYWRlcn0gZnJvbSAnLi9SZXBvRG9jTWV0YUxvYWRlcic7XG5pbXBvcnQge1JlbGVhc2VhYmxlfSBmcm9tICcuLi8uLi8uLi93ZWIvanMvcmVhY3Rvci9FdmVudExpc3RlbmVyJztcblxuZXhwb3J0IGNsYXNzIFJlcG9Eb2NNZXRhTG9hZGVycyB7XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gRXZlbnRMaXN0ZW5lciB0byB0aGUgUmVwb0RvY01ldGFMb2FkZXIgdGhhdCdzIHRocm90dGxlZCBzbyB0aGF0XG4gICAgICogd2UgZ2V0IHBlcmlvZGljIHVwZGF0ZXMgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFkZFRocm90dGxpbmdFdmVudExpc3RlbmVyKHJlcG9Eb2NNZXRhTG9hZGVyOiBSZXBvRG9jTWV0YUxvYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogUmVsZWFzZWFibGUge1xuXG4gICAgICAgIC8vIERPIE5PVCByZWZyZXNoIHRvbyBvZnRlbiBpZiB3ZSBnZXQgbG90cyBvZiBkb2N1bWVudHMgYXMgdGhpcyByZWFsbHlcbiAgICAgICAgLy8gbG9ja3MgdXAgdGhlIFVJIGJ1dCB3ZSBhbHNvIG5lZWQgYSByZWFzb25hYmxlIHRpbWVvdXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRPRE86IHRoaXMgaXMgYSB0b3VnaCBkZWNpc2lvbiBhcyBpdCB0cmFkZXMgdGhyb3VnaHB1dCBmb3IgbGF0ZW5jeVxuICAgICAgICAvLyBhbmQgSSBkb24ndCB3YW50IGxhdGVuY3kgaW4gdGhlIFVJLiAgSXQgbWlnaHQgYmUgYmV0dGVyIHRvIGJhdGNoIGludG9cbiAgICAgICAgLy8gNTAgaXRlbXMgZWFjaCB3aGVuIFNFTkRJTkcgdGhlIGV2ZW50cyBhbmQgbm90IHRocm90dGxpbmcgdGhlIGV2ZW50c1xuICAgICAgICAvLyBidXQgdGhyb3R0bGluZyB0aGUgYWN0dWFsIHNuYXBzaG90IHJhdGUuICBGb3IgZXhhbXBsZSwgaWYgd2UgcmVjZWl2ZVxuICAgICAgICAvLyBhIHNuYXBzaG90IHdpdGggNTAwIGl0ZW1zIHdlIGNhbiBqdXN0IGJyZWFrIHRoYXQgaW50byBzYXkgNTAgaXRlbXNcbiAgICAgICAgLy8gZWFjaCBhbmQgdGhlbiBpbW1lZGlhdGVseSB1cGRhdGUgdGhlIFVJIHdpdGggbm8gdHJhaWxpbmcgbGF0ZW5jeSBhdFxuICAgICAgICAvLyB0aGUgZW5kLiAgQnV0IHdlIGNhbiB0aHJvdHRsZSB0aGUgYWN0dWFsIG51bWJlciBvZiBzbmFwc2hvdHMgc28gdGhhdFxuICAgICAgICAvLyBpZiB3ZSByZWNlaXZlIHRvbnMgb2Ygc25hcHNob3RzIHdpdGggMSBpdGVtIHRoZW0gd2UgYmF0Y2ggdGhlc2UgYnV0XG4gICAgICAgIC8vIGV2ZW4gVEhFTiB0aGF0IHdvdWxkIGFkZCBsYXRlbmN5IGJlY2F1c2Ugd2UncmUgbm90IHN1cmUgaG93IG9mdGVuXG4gICAgICAgIC8vIHRoZSBzZXJ2ZXIgaXMgc2VuZGluZyBkYXRhLlxuXG4gICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIEFMV0FZUyBzZW5kaW5nIHRoZSBsYXN0IGV2ZW50IGFzIHNvb24gYXMgd2UgZ2V0IGl0XG4gICAgICAgIC8vIGFuZCBjbGVhciB0aGUgdGhyb3R0bGVyLiAgVGhpcyB3YXkgaWYgd2UgcmVjZWl2ZSB0aGUgMTAwJSBldmVudCB3ZVxuICAgICAgICAvLyBkb24ndCBoYXZlIGFueSBsYXRlbmN5LiAgV2UncmUgZ29pZ24gdG8gbmVlZCBhIGNsZWFyKCkgb3IgZmx1c2goKVxuICAgICAgICAvLyBtZXRob2QgaW4gdGhlIHRocm90dGxlci4gbWF5YmUganVzdCBhIGZvcmNlIGFyZyB0byBleGVjKCkgdG8gZm9yY2VcbiAgICAgICAgLy8gdGhpcyBtZXRob2QgZnJvbSBiZWluZyBjYWxsZWQuICBXZSBtaWdodCB3YW50IHRvIGhhdmUgYSBtaW5UaW1lb3V0XG4gICAgICAgIC8vIGhlcmUgdG9vIHNvIHRoYXQgdGhpcyBmbHVzaCBiZWhhdmlvciBjb3VsZG4ndCBiZSB0cmlnZ2VyZWQgdG9vIG9mdGVuXG4gICAgICAgIC8vIGJ1dCBtYXliZSB3ZSdyZSBvdmVydGhpbmtpbmcgaGVyZSAoZm9yIG5vdykuXG5cbiAgICAgICAgY29uc3QgdGhyb3R0bGVyT3B0cyA9IHsgbWF4UmVxdWVzdHM6IDI1MCwgbWF4VGltZW91dDogNTAwIH07XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaFRocm90dGxlciA9IG5ldyBUaHJvdHRsZXIoKCkgPT4gY2FsbGJhY2soKSwgdGhyb3R0bGVyT3B0cyk7XG5cbiAgICAgICAgcmV0dXJuIHJlcG9Eb2NNZXRhTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQgPT4ge1xuXG4gICAgICAgICAgICByZWZyZXNoVGhyb3R0bGVyLmV4ZWMoKTtcblxuICAgICAgICB9KTtcblxuICAgIH1cblxufVxuIl19